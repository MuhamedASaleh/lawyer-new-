<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Socket.io Call Test</title>
    <script src="/socket.io/socket.io.js"></script>
</head>
<body>
    <h1>Socket.io Call Test</h1>
    <button id="callButton">Call</button>
    <button id="answerButton">Answer</button>

    <script>
        const socket = io();

        // Calling logic
        document.getElementById('callButton').addEventListener('click', () => {
            socket.emit('callUser', { 
                signal: 'callingSignal', // Replace with actual signal data
                from: socket.id, 
                name: 'CallerName' // Replace with actual caller's name
            });
        });

        // Answering logic
        document.getElementById('answerButton').addEventListener('click', () => {
            const signal = 'answeringSignal'; // Replace with actual signal data
            socket.emit('acceptCall', { 
                signal: signal, 
                from: socket.callerId // Use the caller's ID stored during the call initiation
            });
        });

        // Notification when a call is made
        socket.on('callMade', (data) => {
            console.log('Incoming call from:', data.from);
            alert(`Incoming call from ${data.name}`);
            socket.callerId = data.from; // Store the caller's ID for answering later
        });

        // Handling call acceptance
        socket.on('callAccepted', (signal) => {
            console.log('Call accepted:', signal);
            // Add code to handle the call acceptance and start the call
        });
    </script>
</body>
</html>
